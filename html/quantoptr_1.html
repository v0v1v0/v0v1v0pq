<div class="container">

<table style="width: 100%;"><tr>
<td>abso_diff_est</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate the Gini's mean difference/mean absolute difference(MAD) for a Given Treatment Regime</h2>

<h3>Description</h3>

<p>Estimate the MAD if the entire population follows a 
treatment regime indexed by the given parameters.
This function supports the <code>IPWE_MADopt</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">abso_diff_est(beta, x, y, a, prob, Cnobs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>a vector indexing the treatment regime.
It indexes a linear treatment regime:  
</p>
<p style="text-align: center;"><code class="reqn"> d(x)= I\{\beta_0 + \beta_1 x_1 + ... + \beta_k x_k &gt; 0\}.
</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a matrix of observed covariates from the sample. 
Notice that we assumed the class of treatment regimes is linear.
This is important that columns in <code>x</code> matches with <code>beta</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>a vector, the observed responses from a sample</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>a vector of 0s and 1s, the observed treatments from a sample</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>a vector, the propensity scores of getting treatment 1 in the samples</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Cnobs</code></td>
<td>
<p>A matrix with two columns, enumerating all possible combinations of
pairs of indexes. This can be generated by <code>combn(1:n, 2)</code>,
where <code>n</code> is the number of unique observations.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Wang L, Zhou Y, Song R and Sherwood B (2017).
“Quantile-Optimal Treatment Regimes.”
<em>Journal of the American Statistical Association</em>.
</p>


<h3>See Also</h3>

<p>The function <code>IPWE_MADopt</code> is based on this function.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(stats)
GenerateData.MAD &lt;- function(n)
{
  x1 &lt;- runif(n)
  x2 &lt;- runif(n)
  tp &lt;- exp(-1+1*(x1+x2))/(1+exp(-1+1*(x1+x2)))
  a&lt;-rbinom(n = n, size = 1, prob=tp)
  error &lt;- rnorm(length(x1))
  y &lt;- (1 + a*0.3*(-1+x1+x2&lt;0) +  a*-0.3*(-1+x1+x2&gt;0)) * error
  return(data.frame(x1=x1,x2=x2,a=a,y=y))
}



n &lt;- 500
testData &lt;- GenerateData.MAD(n)
logistic.model.tx &lt;- glm(formula = a~x1+x2, data = testData, family=binomial)
ph &lt;- as.vector(logistic.model.tx$fit)
Cnobs &lt;- combn(1:n, 2)
abso_diff_est(beta=c(1,2,-1), 
              x=model.matrix(a~x1+x2, testData),
              y=testData$y,
              a=testData$a,
              prob=ph,
              Cnobs = Cnobs)

</code></pre>


</div>