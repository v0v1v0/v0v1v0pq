<div class="container">

<table style="width: 100%;"><tr>
<td>QDiabetes-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Type 2 Diabetes Risk Calculator</h2>

<h3>Description</h3>

<p>This package calculates the risk of developing type 2 diabetes using risk prediction algorithms, which were initially derived by <a href="https://clinrisk.co.uk/ClinRisk/Welcome.html">ClinRisk</a>. Currently, these include QDiabetes-2013 and <a href="https://qdiabetes.org/">QDiabetes-2018</a>, although older (and eventually more recent) versions of QDiabetes will be included in future releases.
</p>


<h3>Details</h3>

<p>The package consistes of four risk prediction functions for use in estimating the risk of developing type 2 diabetes:
</p>

<ul>
<li>
<p><code>QDR2013</code> - For estimating the 1â€“10-year risk using QDiabetes-2013.
</p>
</li>
<li>
<p><code>QDR2018A</code> - For estimating the 10-year risk using QDiabetes-2018 (Model A).
</p>
</li>
<li>
<p><code>QDR2018B</code> - For estimating the 10-year risk using QDiabetes-2018 (Model B).
</p>
</li>
<li>
<p><code>QDR2018C</code> - For estimating the 10-year risk using QDiabetes-2018 (Model C).
</p>
</li>
</ul>
<p>The following variables are used by each risk prediction function present in this package:
</p>

<table>
<tr>
<td style="text-align: left;">
    <b>Description</b>                                      </td>
<td style="text-align: right;">  <b>Variable</b> </td>
<td style="text-align: right;">  <b>Type</b> </td>
<td style="text-align: right;">  <b><code>QDR2013</code></b> </td>
<td style="text-align: right;">  <b><code>QDR2018A</code></b>  </td>
<td style="text-align: right;">  <b><code>QDR2018B</code></b>  </td>
<td style="text-align: right;">  <b><code>QDR2018C</code></b>  </td>
</tr>
<tr>
<td style="text-align: left;">
    Gender                                                  </td>
<td style="text-align: right;">  <code>sex</code>      </td>
<td style="text-align: right;">  character   </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Age                                                     </td>
<td style="text-align: right;">  <code>age</code>      </td>
<td style="text-align: right;">  double      </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Body mass index (BMI)                                   </td>
<td style="text-align: right;">  <code>bmi</code>      </td>
<td style="text-align: right;">  double      </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Ethnicity                                               </td>
<td style="text-align: right;">  <code>ethn</code>     </td>
<td style="text-align: right;">  character   </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Smoking status                                          </td>
<td style="text-align: right;">  <code>smoke</code>    </td>
<td style="text-align: right;">  character   </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Deprivation                                             </td>
<td style="text-align: right;">  <code>tds</code>      </td>
<td style="text-align: right;">  double      </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Fasting plasma glucose (FPG)                            </td>
<td style="text-align: right;">  <code>fpg</code>      </td>
<td style="text-align: right;">  double      </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">                          </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">                          </td>
</tr>
<tr>
<td style="text-align: left;">
    Glycated haemoglobin (HbA1c)                            </td>
<td style="text-align: right;">  <code>hba1c</code>    </td>
<td style="text-align: right;">  double      </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">                          </td>
<td style="text-align: right;">                          </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Family history of diabetes                              </td>
<td style="text-align: right;">  <code>fhdm</code>     </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of treated hypertension                         </td>
<td style="text-align: right;">  <code>htn</code>      </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of cardiovascular disease                       </td>
<td style="text-align: right;">  <code>cvd</code>      </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of gestational Diabetes                         </td>
<td style="text-align: right;">  <code>gdm</code>      </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of polycystic ovary syndrome                    </td>
<td style="text-align: right;">  <code>pcos</code>     </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of learning difficulties                        </td>
<td style="text-align: right;">  <code>learn</code>    </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of schizophrenia or bipolar affective disorder  </td>
<td style="text-align: right;">  <code>psy</code>      </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of corticosteroid use                           </td>
<td style="text-align: right;">  <code>ster</code>     </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of statin use                                   </td>
<td style="text-align: right;">  <code>stat</code>     </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    History of use of 2nd generation antipsychotics         </td>
<td style="text-align: right;">  <code>apsy</code>     </td>
<td style="text-align: right;">  logical     </td>
<td style="text-align: right;">                        </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
<td style="text-align: right;">  x                       </td>
</tr>
<tr>
<td style="text-align: left;">
    Survival time                                           </td>
<td style="text-align: right;">  <code>surv</code>     </td>
<td style="text-align: right;">  integer     </td>
<td style="text-align: right;">  x                     </td>
<td style="text-align: right;">                          </td>
<td style="text-align: right;">                          </td>
<td style="text-align: right;">
  </td>
</tr>
</table>
<p><em>NB: height (<code>ht</code>) and weight (<code>wt</code>) may be specified in place of body mass index (<code>bmi</code>) in any of the above functions.</em>
</p>
<p>As per <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>'s general coding sytax, factor or character values may be passed to any risk prediction function parameter where a character value is expected, so long as the factor variable label matches one of the expected character strings. Similarly, <code>0</code> or <code>1</code> many be used in place of <code>FALSE</code> or <code>TRUE</code> for any function parameter where a logical value is expected.
</p>


<h3>Disclaimer</h3>

<p>ClinRisk do not support of endorse this code. End users should see the original C source as the 'gold standard' open source implementation. Please note that the QDiabetes <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> package has been created as a research tool for scientific purposes only. The QDiabetes <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> package has not been granted Medicines and Healthcare products Regulatory Agency (MHRA) approval as a medical device, and hence, should not be used as part of any individualised risk assessment.
</p>


<h3>Funding</h3>

<p>This project was funded by the National Institute for Health Research (NIHR) School for Primary Care Research (SPCR) [project number: <a href="https://www.spcr.nihr.ac.uk/projects/412-quantifying-the-risk-of-type-2-diabetes-across-the-uk">412</a>]. The views expressed are those of the author(s) and not necessarily those of the NIHR or the Department of Health and Social Care.
</p>


<h3>Note</h3>

<p>Many of the default values used in the risk prediction functions of this package were selected to be representative of a UK population. These values are only intended to minimise the amount of typing required when using the risk prediction functions in an exploratory manner. They are unlikely to be useful in a research setting, and you would need to know the exact values to assign to all function parameters in order to make accurate risk predictions. Hence, while you can get risk preditions from the <code>QDR2013</code> and <code>QDR2018A</code> functions through the specification of only <code>sex</code>, <code>age</code>, and <code>bmi</code>, you would be assuming White or missing ethnicity, non-smoking status, a Townsend deprivation score of 0, and the complete absence of any relevant medical history/conditions and concommitant drug therapies. In the case of <code>QDR2013</code>, you would also be assuming that a 10-year risk window is desired.
</p>


<h3>Author(s)</h3>

<p>Benjamin G. Feakins <a href="mailto:benjamin.feakins@ndph.ox.ac.uk">benjamin.feakins@ndph.ox.ac.uk</a></p>


<h3>References</h3>

<p>Hippisley-Cox, J., Coupland, C., Robson, J., Sheikh, A. and Brindle, P. (2009).
Predicting risk of type 2 diabetes in England and Wales: prospective derivation and validation of QDScore.
<em>BMJ</em>
<b>338</b>, b880.
doi: <a href="https://doi.org/10.1136/bmj.b880">10.1136/bmj.b880</a>
</p>
<p>Hippisley-Cox, J. and Coupland, C. (2017).
Development and validation of QDiabetes-2018 risk prediction algorithm to estimate future risk of type 2 diabetes: cohort study.
<em>BMJ</em>
<b>359</b>, j5019.
doi: <a href="https://doi.org/10.1136/bmj.j5019">10.1136/bmj.j5019</a>
</p>


<h3>See Also</h3>

<p><code>getTDS</code> - For looking up Townsend deprivation scores from UK postcodes.
</p>
<p><code>dat_qdr</code> - QDiabetes sample dataset.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Simple usage
## QDiabetes-2013
QDR2013(sex = "Female", age = 76, ht = 1.65, wt = 70)
QDR2013(sex = "Male", age = seq(25, 80, 5), bmi = 40, ethn = "Other", tds = 5)
## QDiabetes-2018
# Model A
QDR2018A(sex = "Female", age = 76, ht = 1.65, wt = 70)
QDR2018A(sex = "Male", age = seq(25, 80, 5), bmi = 40, ethn = "Other", tds = 5)
# Model B (inc. FPG)
QDR2018B(sex = "Female", age = 76, ht = 1.65, wt = 70, fpg = 4)
QDR2018B(sex = "Male", age = 55, bmi = 40, fpg = 2:6, ethn = "BlackCaribbean")
# Model C (inc. HbA1c)
QDR2018C(sex = "Female", age = 76, ht = 1.65, wt = 70, hba1c = 25)
QDR2018C(sex = "Male", age = 55, bmi = 40, hba1c = seq(15, 40, 5), ethn = "Chinese")

### Using postcodes to estimate Townsend deprivation scores
## QDiabetes-2013
QDR2013(sex = "Male", age = 65, bmi = 40, tds = getTDS("OX3 7LF"))
QDR2013(sex = "Female", age = 60, bmi = 35, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
## QDiabetes-2018
# Model A
QDR2018A(sex = "Male", age = 65, bmi = 40, tds = getTDS("OX3 7LF"))
QDR2018A(sex = "Female", age = 60, bmi = 35, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
# Model B (inc. FPG)
QDR2018B(sex = "Male", age = 65, bmi = 40, fpg = 6, tds = getTDS("OX3 7LF"))
QDR2018B(sex = "Female", age = 60, bmi = 35, fpg = 6, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
# Model C (inc. HbA1c)
QDR2018C(sex = "Male", age = 65, bmi = 40, hba1c = 42, tds = getTDS("OX3 7LF"))
QDR2018C(sex = "Female", age = 60, bmi = 35, hba1c = 42, tds = getTDS(c("OX2 6NW", "OX2 6GG")))
</code></pre>


</div>